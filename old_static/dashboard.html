<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | HandwerkPro</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="dashboard_extra.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,300;0,14..32,400;0,14..32,500;0,14..32,600;0,14..32,700;1,14..32,400&family=Outfit:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">
</head>

<body class="dashboard-body">

    <!-- SIDEBAR -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <a href="index.html" class="logo sidebar-logo">‚öôÔ∏è Handwerk<strong>Pro</strong></a>
            <button class="sidebar-close" id="sidebar-close">‚úï</button>
        </div>
        <nav class="sidebar-nav">
            <div class="nav-group">
                <span class="nav-group-label">Hauptmen√º</span>
                <a href="#" class="nav-item active" data-view="dashboard"><span class="nav-icon">üìä</span>Dashboard</a>
                <a href="#" class="nav-item" data-view="angebote"><span class="nav-icon">üìã</span>Angebote &
                    Rechnungen<span class="nav-badge" id="badge-angebote">0</span></a>
                <a href="#" class="nav-item" data-view="mahnungen"><span class="nav-icon">üîî</span>Mahnwesen<span
                        class="nav-badge orange" id="badge-mahnungen">0</span></a>
                <a href="#" class="nav-item" data-view="projekte"><span class="nav-icon">üèóÔ∏è</span>Projekte<span
                        class="nav-badge orange" id="badge-projekte">0</span></a>
                <a href="#" class="nav-item" data-view="plantafel"><span class="nav-icon">üìÖ</span>Plantafel</a>
                <a href="#" class="nav-item" data-view="zeiten"><span class="nav-icon">‚è±Ô∏è</span>Zeiterfassung</a>
            </div>
            <div class="nav-group">
                <span class="nav-group-label">Stammdaten</span>
                <a href="#" class="nav-item" data-view="kunden"><span class="nav-icon">üë•</span>Kunden<span
                        class="nav-badge" id="badge-kunden">0</span></a>
                <a href="#" class="nav-item" data-view="mitarbeiter"><span class="nav-icon">üë∑</span>Mitarbeiter</a>
                <a href="#" class="nav-item" data-view="leistungen"><span class="nav-icon">‚öôÔ∏è</span>Leistungen &
                    Artikel</a>
            </div>
            <div class="nav-group">
                <span class="nav-group-label">Phase 2 (bald)</span>
                <a href="#" class="nav-item locked"><span class="nav-icon">üìà</span>Nachkalkulation<span
                        class="nav-soon">Bald</span></a>
                <a href="#" class="nav-item locked"><span class="nav-icon">üí¨</span>Projektchat<span
                        class="nav-soon">Bald</span></a>
                <a href="#" class="nav-item locked"><span class="nav-icon">ü§ñ</span>KI-Eingangsrechnungen<span
                        class="nav-soon">Beta</span></a>
            </div>
        </nav>
        <div class="sidebar-user">
            <div class="su-avatar">TM</div>
            <div>
                <div class="su-name">Thomas M√ºller</div>
                <div class="su-role">Betriebsleiter</div>
            </div>
            <div class="su-options">‚ãÆ</div>
        </div>
    </aside>

    <!-- MAIN AREA -->
    <div class="dashboard-main">
        <!-- TOPBAR -->
        <header class="dash-topbar">
            <button class="topbar-menu-btn" id="topbar-menu-btn">‚ò∞</button>
            <div class="topbar-search">
                <span class="search-icon">üîç</span>
                <input type="text" placeholder="Suchen‚Ä¶ (Enter dr√ºcken)" id="global-search">
            </div>
            <div class="topbar-actions">
                <button class="tba-btn" id="notif-btn" title="Benachrichtigungen">üîî<span class="notif-dot"
                        id="notif-dot"></span></button>
                <a href="index.html" class="btn btn-ghost btn-sm">‚Üê Zur Landingpage</a>
                <button class="btn btn-primary btn-sm" id="quick-create-btn">+ Neu erstellen</button>
            </div>
        </header>

        <!-- VIEWS -->
        <div class="views-container" id="views-container">

            <!-- ===== DASHBOARD ===== -->
            <div class="view active" id="view-dashboard">
                <div class="view-header">
                    <div>
                        <h1>Guten Morgen, Thomas üëã</h1>
                        <p class="view-sub" id="dash-date-sub">Donnerstag, 26. Februar 2026</p>
                    </div>
                    <div class="view-header-actions">
                        <select class="select-sm" id="period-select">
                            <option value="month">Diesen Monat</option>
                            <option value="lastmonth">Letzten Monat</option>
                            <option value="year">Dieses Jahr</option>
                        </select>
                    </div>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="sc-icon blue">‚Ç¨</div>
                        <div class="sc-info">
                            <div class="sc-label">Umsatz (Rechnungen)</div>
                            <div class="sc-value" id="stat-umsatz">‚Ç¨ 0</div>
                            <div class="sc-trend" id="stat-umsatz-sub">aus bezahlten Rechnungen</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="sc-icon orange">!</div>
                        <div class="sc-info">
                            <div class="sc-label">Offene Rechnungen</div>
                            <div class="sc-value" id="stat-offen">‚Ç¨ 0</div>
                            <div class="sc-trend warn" id="stat-offen-sub">0 √ºberf√§llig</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="sc-icon green">üèó</div>
                        <div class="sc-info">
                            <div class="sc-label">Aktive Projekte</div>
                            <div class="sc-value" id="stat-projekte">0</div>
                            <div class="sc-trend" id="stat-proj-sub">0 in Planung</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="sc-icon purple">üìã</div>
                        <div class="sc-info">
                            <div class="sc-label">Offene Angebote</div>
                            <div class="sc-value" id="stat-angebote">0</div>
                            <div class="sc-trend" id="stat-ang-sub">‚Ç¨ 0 Volumen</div>
                        </div>
                    </div>
                </div>
                <div class="dashboard-grid">
                    <div class="dash-col main-col">
                        <div class="dash-card">
                            <div class="dash-card-header">
                                <h3>Letzte Dokumente</h3><button class="link-btn" data-nav="angebote">Alle anzeigen
                                    ‚Üí</button>
                            </div>
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Nummer</th>
                                        <th>Typ</th>
                                        <th>Kunde</th>
                                        <th>Betrag</th>
                                        <th>Status</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody id="dash-docs-tbody"></tbody>
                            </table>
                        </div>
                        <div class="dash-card">
                            <div class="dash-card-header">
                                <h3>Aktive Projekte</h3><button class="link-btn" data-nav="projekte">Alle anzeigen
                                    ‚Üí</button>
                            </div>
                            <div id="dash-projects-list"></div>
                        </div>
                    </div>
                    <div class="dash-col side-col">
                        <div class="dash-card alerts-card">
                            <div class="dash-card-header">
                                <h3>‚ö†Ô∏è Handlungsbedarf</h3>
                            </div>
                            <div id="dash-alerts"></div>
                        </div>
                        <div class="dash-card">
                            <div class="dash-card-header">
                                <h3>Schnellzugriff</h3>
                            </div>
                            <div class="quick-actions">
                                <button class="qa-btn" id="qa-angebot"><span>üìã</span>Angebot erstellen</button>
                                <button class="qa-btn" id="qa-rechnung"><span>üßæ</span>Rechnung stellen</button>
                                <button class="qa-btn" id="qa-projekt"><span>üèóÔ∏è</span>Projekt anlegen</button>
                                <button class="qa-btn" id="qa-kunde"><span>üë•</span>Kunden erfassen</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ===== ANGEBOTE & RECHNUNGEN ===== -->
            <div class="view" id="view-angebote">
                <div class="view-header">
                    <div>
                        <h1>Angebote & Rechnungen</h1>
                        <p class="view-sub" id="angeb-sub">0 Dokumente</p>
                    </div>
                    <button class="btn btn-primary" id="btn-new-dok">+ Neues Dokument</button>
                </div>
                <div class="filter-bar">
                    <div class="filter-tabs" id="dok-filter-tabs">
                        <button class="filter-tab active" data-filter="alle">Alle</button>
                        <button class="filter-tab" data-filter="Angebot">Angebote</button>
                        <button class="filter-tab" data-filter="Rechnung">Rechnungen</button>
                        <button class="filter-tab" data-filter="Auftragsbest√§tigung">Auftragsbest√§tigungen</button>
                    </div>
                    <input type="text" class="search-input" id="dok-search" placeholder="Suchen‚Ä¶">
                </div>
                <div class="dash-card no-padding">
                    <table class="data-table full-table">
                        <thead>
                            <tr>
                                <th>Nummer</th>
                                <th>Typ</th>
                                <th>Kunde</th>
                                <th>Datum</th>
                                <th>F√§llig am</th>
                                <th>Betrag</th>
                                <th>Status</th>
                                <th>Aktionen</th>
                            </tr>
                        </thead>
                        <tbody id="angebote-tbody"></tbody>
                    </table>
                    <div id="angebote-empty" class="empty-state hidden">Noch keine Dokumente. Klicken Sie auf "+ Neues
                        Dokument".</div>
                </div>
            </div>

            <!-- ===== MAHNWESEN ===== -->
            <div class="view" id="view-mahnungen">
                <div class="view-header">
                    <div>
                        <h1>Mahnwesen</h1>
                        <p class="view-sub" id="mahn-sub">Offene Forderungen verwalten</p>
                    </div>
                    <button class="btn btn-outline" id="btn-auto-mahnen">ü§ñ Auto-Mahnung pr√ºfen</button>
                </div>
                <div class="stats-grid" style="grid-template-columns:repeat(3,1fr);margin-bottom:1.5rem">
                    <div class="stat-card">
                        <div class="sc-icon red">!</div>
                        <div class="sc-info">
                            <div class="sc-label">√úberf√§llig</div>
                            <div class="sc-value" id="stat-ueberfaellig">‚Ç¨ 0</div>
                            <div class="sc-trend warn" id="stat-ueberfaellig-count">0 Rechnungen</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="sc-icon orange">üì®</div>
                        <div class="sc-info">
                            <div class="sc-label">Gemahnt (gesamt)</div>
                            <div class="sc-value" id="stat-gemahnt">0</div>
                            <div class="sc-trend">Mahnungen versendet</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="sc-icon green">‚úì</div>
                        <div class="sc-info">
                            <div class="sc-label">Eingegangen durch Mahnung</div>
                            <div class="sc-value" id="stat-mahn-erfolg">‚Ç¨ 0</div>
                            <div class="sc-trend">Diesen Monat</div>
                        </div>
                    </div>
                </div>
                <div class="dash-card no-padding">
                    <table class="data-table full-table">
                        <thead>
                            <tr>
                                <th>Rechnung</th>
                                <th>Kunde</th>
                                <th>Betrag</th>
                                <th>F√§llig seit</th>
                                <th>Mahnstufe</th>
                                <th>Letzte Mahnung</th>
                                <th>Aktionen</th>
                            </tr>
                        </thead>
                        <tbody id="mahn-tbody"></tbody>
                    </table>
                    <div id="mahn-empty" class="empty-state hidden">‚úÖ Keine offenen Forderungen. Alle Rechnungen wurden
                        bezahlt.</div>
                </div>
            </div>

            <!-- ===== PROJEKTE ===== -->
            <div class="view" id="view-projekte">
                <div class="view-header">
                    <div>
                        <h1>Projekte</h1>
                        <p class="view-sub" id="proj-sub">0 Projekte</p>
                    </div>
                    <button class="btn btn-primary" id="btn-new-projekt">+ Neues Projekt</button>
                </div>
                <div class="filter-bar">
                    <div class="filter-tabs" id="proj-filter-tabs">
                        <button class="filter-tab active" data-filter="alle">Alle</button>
                        <button class="filter-tab" data-filter="Planung">In Planung</button>
                        <button class="filter-tab" data-filter="Aktiv">Aktiv</button>
                        <button class="filter-tab" data-filter="Abgeschlossen">Abgeschlossen</button>
                    </div>
                    <input type="text" class="search-input" id="proj-search" placeholder="Projekt suchen‚Ä¶">
                </div>
                <div class="projects-grid" id="projects-grid"></div>
                <div id="proj-empty" class="empty-state hidden">Noch keine Projekte. Klicken Sie auf "+ Neues Projekt".
                </div>
            </div>

            <!-- ===== PLANTAFEL ===== -->
            <div class="view" id="view-plantafel">
                <div class="view-header">
                    <div>
                        <h1>Plantafel</h1>
                        <p class="view-sub" id="plantafel-kw-sub"></p>
                    </div>
                    <div class="view-header-actions">
                        <button class="btn btn-ghost" id="plant-prev">‚Üê Vorwoche</button>
                        <button class="btn btn-ghost" id="plant-today">Heute</button>
                        <button class="btn btn-ghost" id="plant-next">N√§chste ‚Üí</button>
                    </div>
                </div>
                <div class="dash-card no-padding">
                    <div class="plantafel-table" id="plantafel-table"></div>
                </div>
                <div class="plant-legend" id="plant-legend"></div>
            </div>

            <!-- ===== ZEITERFASSUNG ===== -->
            <div class="view" id="view-zeiten">
                <div class="view-header">
                    <div>
                        <h1>Zeiterfassung</h1>
                        <p class="view-sub">Arbeitszeiten erfassen und verwalten</p>
                    </div>
                    <div class="view-header-actions">
                        <button class="btn btn-outline" id="btn-new-zeit">+ Eintrag hinzuf√ºgen</button>
                        <button class="btn btn-outline" id="btn-export-zeiten">CSV-Export</button>
                    </div>
                </div>
                <div class="zeiten-grid">
                    <div class="timer-widget-card">
                        <h3>Aktiver Timer</h3>
                        <div class="live-timer" id="live-timer">00:00:00</div>
                        <div class="timer-project-select">
                            <select class="form-control" id="timer-proj-select"></select>
                        </div>
                        <div class="timer-type-btns">
                            <button class="ttb active" data-type="Arbeit">Arbeit</button>
                            <button class="ttb" data-type="Fahrt">Fahrt</button>
                            <button class="ttb" data-type="Pause">Pause</button>
                        </div>
                        <button class="btn btn-primary btn-block" id="timer-toggle-btn">‚ñ∂ Timer starten</button>
                        <div id="timer-today-summary" style="margin-top:1rem"></div>
                    </div>
                    <div class="zeiten-woche">
                        <div class="dash-card">
                            <div class="dash-card-header">
                                <h3>Zeiteintr√§ge</h3><button class="link-btn" id="zeiten-filter-toggle">Filter
                                    ‚Üì</button>
                            </div>
                            <div id="zeiten-filter-bar" class="hidden"
                                style="margin-bottom:1rem;display:flex;gap:.5rem;flex-wrap:wrap">
                                <select class="select-sm" id="zeit-filter-ma">
                                    <option value="">Alle Mitarbeiter</option>
                                </select>
                                <select class="select-sm" id="zeit-filter-proj">
                                    <option value="">Alle Projekte</option>
                                </select>
                                <input type="date" class="select-sm" id="zeit-filter-from">
                                <input type="date" class="select-sm" id="zeit-filter-to">
                                <button class="btn btn-ghost btn-sm" id="zeit-filter-clear">Zur√ºcksetzen</button>
                            </div>
                            <div id="zeiten-list-container"></div>
                        </div>
                    </div>
                    <div class="zeiten-approval">
                        <div class="dash-card">
                            <div class="dash-card-header">
                                <h3>Zur Genehmigung</h3>
                            </div>
                            <div id="approval-list-container"></div>
                            <div id="approval-empty" class="empty-state hidden" style="padding:1rem">Keine ausstehenden
                                Genehmigungen.</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ===== KUNDEN ===== -->
            <div class="view" id="view-kunden">
                <div class="view-header">
                    <div>
                        <h1>Kunden</h1>
                        <p class="view-sub" id="kunden-sub">0 Kunden</p>
                    </div>
                    <div class="view-header-actions">
                        <button class="btn btn-outline" id="btn-import-kunden">CSV importieren</button>
                        <button class="btn btn-primary" id="btn-new-kunde">+ Neuer Kunde</button>
                    </div>
                </div>
                <div class="filter-bar">
                    <input type="text" class="search-input wide" placeholder="Name, Telefon, Email‚Ä¶" id="kunde-search">
                    <select class="select-sm" id="kunde-filter-type">
                        <option value="">Alle Kategorien</option>
                        <option value="Gewerblich">Gewerblich</option>
                        <option value="Privat">Privat</option>
                        <option value="Stammkunde">Stammkunde</option>
                    </select>
                </div>
                <div class="kunden-grid" id="kunden-grid"></div>
                <div id="kunden-empty" class="empty-state hidden">Noch keine Kunden. Klicken Sie auf "+ Neuer Kunde".
                </div>
            </div>

            <!-- ===== MITARBEITER ===== -->
            <div class="view" id="view-mitarbeiter">
                <div class="view-header">
                    <div>
                        <h1>Mitarbeiter</h1>
                        <p class="view-sub" id="ma-sub">0 Mitarbeiter</p>
                    </div>
                    <button class="btn btn-primary" id="btn-new-ma">+ Mitarbeiter hinzuf√ºgen</button>
                </div>
                <div class="mitarbeiter-grid" id="mitarbeiter-grid"></div>
            </div>

            <!-- ===== LEISTUNGEN ===== -->
            <div class="view" id="view-leistungen">
                <div class="view-header">
                    <div>
                        <h1>Leistungen & Artikel</h1>
                        <p class="view-sub" id="leistungen-sub">0 Leistungen</p>
                    </div>
                    <button class="btn btn-primary" id="btn-new-leistung">+ Neue Leistung</button>
                </div>
                <div class="leistungen-grid" id="leistungen-grid"></div>
            </div>

        </div><!-- /views-container -->
    </div><!-- /dashboard-main -->

    <!-- ============================================
         MODALS
         ============================================ -->

    <!-- Dokument-Editor Modal -->
    <div class="modal-overlay hidden" id="modal-dokument">
        <div class="modal large-modal">
            <div class="modal-header">
                <h2 id="dok-modal-title">Neues Dokument erstellen</h2>
                <button class="modal-close" data-close="modal-dokument">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="editor-grid">
                    <div class="editor-left">
                        <section class="editor-section">
                            <h4>Dokument-Typ & Kunde</h4>
                            <div class="form-row" style="gap:.75rem;margin-bottom:.75rem">
                                <div style="flex:0 0 180px">
                                    <label class="form-label">Typ</label>
                                    <select class="form-control" id="dok-type">
                                        <option>Angebot</option>
                                        <option>Rechnung</option>
                                        <option>Auftragsbest√§tigung</option>
                                        <option>Lieferschein</option>
                                    </select>
                                </div>
                                <div style="flex:1">
                                    <label class="form-label">Kunde</label>
                                    <select class="form-control" id="dok-customer"></select>
                                </div>
                            </div>
                            <div class="form-row" style="gap:.75rem">
                                <div style="flex:1">
                                    <label class="form-label">Datum</label>
                                    <input type="date" class="form-control" id="dok-date">
                                </div>
                                <div style="flex:1">
                                    <label class="form-label">F√§llig / G√ºltig bis</label>
                                    <input type="date" class="form-control" id="dok-due">
                                </div>
                                <div style="flex:1">
                                    <label class="form-label">Projekt (optional)</label>
                                    <select class="form-control" id="dok-project">
                                        <option value="">‚Äî kein Projekt ‚Äî</option>
                                    </select>
                                </div>
                            </div>
                        </section>
                        <section class="editor-section">
                            <h4>Positionen</h4>
                            <div id="dok-positions"></div>
                            <button class="btn btn-ghost btn-sm" id="dok-add-pos" style="margin-top:.5rem">+ Position
                                hinzuf√ºgen</button>
                            <button class="btn btn-ghost btn-sm" id="dok-add-from-catalog" style="margin-top:.5rem">üì¶
                                Aus Katalog‚Ä¶</button>
                        </section>
                        <section class="editor-section">
                            <h4>Notizen / Zahlungsbedingungen</h4>
                            <textarea class="form-control" id="dok-notes" rows="3"
                                placeholder="Zahlbar innerhalb von 14 Tagen netto ohne Abzug‚Ä¶">Zahlbar innerhalb von 14 Tagen netto ohne Abzug. Vielen Dank f√ºr Ihren Auftrag!</textarea>
                        </section>
                    </div>
                    <div class="editor-right">
                        <section class="editor-section summary-box">
                            <h4>Zusammenfassung</h4>
                            <div class="summary-row"><span>Nettobetrag</span><span id="dok-sum-net">‚Ç¨ 0,00</span></div>
                            <div class="summary-row">
                                <span>MwSt. <select class="inline-select" id="dok-tax">
                                        <option value="19">19%</option>
                                        <option value="7">7%</option>
                                        <option value="0">0%</option>
                                    </select></span>
                                <span id="dok-sum-tax">‚Ç¨ 0,00</span>
                            </div>
                            <div class="summary-row">
                                <span>Rabatt <input type="number" class="inline-input" id="dok-discount" value="0"
                                        min="0" max="100"> %</span>
                                <span id="dok-sum-disc">- ‚Ç¨ 0,00</span>
                            </div>
                            <div class="summary-row total-row"><strong>Gesamtbetrag</strong><strong id="dok-sum-total">‚Ç¨
                                    0,00</strong></div>
                        </section>
                        <section class="editor-section">
                            <h4>Vorschau</h4>
                            <div class="dok-preview" id="dok-preview-area">
                                <div class="dpa-header">
                                    <div class="dpa-logo">‚öôÔ∏è HandwerkPro GmbH</div>
                                    <div class="dpa-meta" id="dpa-meta-right"></div>
                                </div>
                                <div class="dpa-customer-block" id="dpa-cust"></div>
                                <div id="dpa-positions-preview"></div>
                                <div class="dpa-totals" id="dpa-totals"></div>
                                <div class="dpa-footer-text" id="dok-notes-prev"></div>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-ghost" data-close="modal-dokument">Abbrechen</button>
                <span style="flex:1"></span>
                <button class="btn btn-outline" id="dok-save-draft">Entwurf speichern</button>
                <button class="btn btn-primary" id="dok-save-send">üíæ Speichern & Versenden</button>
            </div>
        </div>
    </div>

    <!-- Mahnung Modal -->
    <div class="modal-overlay hidden" id="modal-mahnung">
        <div class="modal" style="width:min(520px,95vw)">
            <div class="modal-header">
                <h2>Mahnung versenden</h2>
                <button class="modal-close" data-close="modal-mahnung">‚úï</button>
            </div>
            <div class="modal-body">
                <div id="mahn-modal-content"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-ghost" data-close="modal-mahnung">Abbrechen</button>
                <button class="btn btn-primary" id="btn-send-mahnung">üìß Mahnung versenden</button>
            </div>
        </div>
    </div>

    <!-- Zahlung buchen Modal -->
    <div class="modal-overlay hidden" id="modal-zahlung">
        <div class="modal" style="width:min(420px,95vw)">
            <div class="modal-header">
                <h2>Zahlung buchen</h2>
                <button class="modal-close" data-close="modal-zahlung">‚úï</button>
            </div>
            <div class="modal-body">
                <div id="zahlung-modal-content"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-ghost" data-close="modal-zahlung">Abbrechen</button>
                <button class="btn btn-primary" id="btn-confirm-zahlung">‚úì Zahlung buchen</button>
            </div>
        </div>
    </div>

    <!-- Projekt Modal -->
    <div class="modal-overlay hidden" id="modal-projekt">
        <div class="modal" style="width:min(680px,95vw)">
            <div class="modal-header">
                <h2 id="proj-modal-title">Neues Projekt</h2>
                <button class="modal-close" data-close="modal-projekt">‚úï</button>
            </div>
            <div class="modal-body">
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem">
                    <div class="form-group">
                        <label class="form-label">Projektname *</label>
                        <input class="form-control" id="proj-name" placeholder="z.B. Fassadenarbeiten Musterstra√üe 5">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Kunde *</label>
                        <select class="form-control" id="proj-customer"></select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Adresse / Baustelle</label>
                        <input class="form-control" id="proj-address" placeholder="Musterstra√üe 5, 69115 Heidelberg">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Status</label>
                        <select class="form-control" id="proj-status">
                            <option>Planung</option>
                            <option>Aktiv</option>
                            <option>Abgeschlossen</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Startdatum</label>
                        <input type="date" class="form-control" id="proj-start">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Enddatum (geplant)</label>
                        <input type="date" class="form-control" id="proj-end">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Budget (‚Ç¨)</label>
                        <input type="number" class="form-control" id="proj-budget" placeholder="15000">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Fortschritt (%)</label>
                        <input type="number" class="form-control" id="proj-progress" min="0" max="100" value="0">
                    </div>
                    <div class="form-group" style="grid-column:span 2">
                        <label class="form-label">Team (Mitarbeiter zuweisen)</label>
                        <div id="proj-team-selector" class="team-selector"></div>
                    </div>
                    <div class="form-group" style="grid-column:span 2">
                        <label class="form-label">Notizen</label>
                        <textarea class="form-control" id="proj-notes" rows="2"
                            placeholder="Besonderheiten, Zufahrt, Schl√ºsselinfos‚Ä¶"></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-ghost" data-close="modal-projekt">Abbrechen</button>
                <button class="btn btn-primary" id="btn-save-projekt">üíæ Speichern</button>
            </div>
        </div>
    </div>

    <!-- Projekt-Detail Modal -->
    <div class="modal-overlay hidden" id="modal-projekt-detail">
        <div class="modal large-modal">
            <div class="modal-header">
                <h2 id="proj-detail-title">Projektdetails</h2>
                <div style="display:flex;gap:.5rem">
                    <button class="btn btn-outline btn-sm" id="proj-detail-edit">‚úèÔ∏è Bearbeiten</button>
                    <button class="modal-close" data-close="modal-projekt-detail">‚úï</button>
                </div>
            </div>
            <div class="modal-body" id="proj-detail-body"></div>
        </div>
    </div>

    <!-- Kunde Modal -->
    <div class="modal-overlay hidden" id="modal-kunde">
        <div class="modal" style="width:min(640px,95vw)">
            <div class="modal-header">
                <h2 id="kunde-modal-title">Neuer Kunde</h2>
                <button class="modal-close" data-close="modal-kunde">‚úï</button>
            </div>
            <div class="modal-body">
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem">
                    <div class="form-group">
                        <label class="form-label">Name / Firma *</label>
                        <input class="form-control" id="kunde-name" placeholder="M√ºller GmbH oder Max Mustermann">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Kategorie</label>
                        <select class="form-control" id="kunde-type">
                            <option>Gewerblich</option>
                            <option>Privat</option>
                            <option>Stammkunde</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" id="kunde-email" placeholder="info@mustermann.de">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Telefon</label>
                        <input class="form-control" id="kunde-tel" placeholder="06221 / 123456">
                    </div>
                    <div class="form-group" style="grid-column:span 2">
                        <label class="form-label">Adresse</label>
                        <input class="form-control" id="kunde-address" placeholder="Musterstra√üe 1, 69115 Heidelberg">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Zahlungsziel (Tage)</label>
                        <input type="number" class="form-control" id="kunde-zahlungsziel" value="14" min="0">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Kreditlimit (‚Ç¨)</label>
                        <input type="number" class="form-control" id="kunde-kreditlimit" value="10000">
                    </div>
                    <div class="form-group" style="grid-column:span 2">
                        <label class="form-label">Interne Notizen</label>
                        <textarea class="form-control" id="kunde-notes" rows="2"
                            placeholder="Besonderheiten, Ansprechpartner‚Ä¶"></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-ghost" data-close="modal-kunde">Abbrechen</button>
                <button class="btn btn-primary" id="btn-save-kunde">üíæ Kunden speichern</button>
            </div>
        </div>
    </div>

    <!-- Mitarbeiter Modal -->
    <div class="modal-overlay hidden" id="modal-ma">
        <div class="modal" style="width:min(540px,95vw)">
            <div class="modal-header">
                <h2 id="ma-modal-title">Mitarbeiter hinzuf√ºgen</h2>
                <button class="modal-close" data-close="modal-ma">‚úï</button>
            </div>
            <div class="modal-body">
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem">
                    <div class="form-group"><label class="form-label">Vorname *</label><input class="form-control"
                            id="ma-vorname" placeholder="Klaus"></div>
                    <div class="form-group"><label class="form-label">Nachname *</label><input class="form-control"
                            id="ma-nachname" placeholder="Weber"></div>
                    <div class="form-group"><label class="form-label">Rolle / Position</label><input
                            class="form-control" id="ma-rolle" placeholder="Geselle, Bauleiter‚Ä¶"></div>
                    <div class="form-group"><label class="form-label">Stundensatz (‚Ç¨)</label><input type="number"
                            class="form-control" id="ma-stunde" value="45"></div>
                    <div class="form-group"><label class="form-label">Email</label><input type="email"
                            class="form-control" id="ma-email" placeholder="k.weber@firma.de"></div>
                    <div class="form-group"><label class="form-label">Telefon</label><input class="form-control"
                            id="ma-tel" placeholder="+49 170 123456"></div>
                    <div class="form-group" style="grid-column:span 2">
                        <label class="form-label">Qualifikationen (kommagetrennt)</label>
                        <input class="form-control" id="ma-skills" placeholder="Malerei, Fassade, Tapezieren">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-ghost" data-close="modal-ma">Abbrechen</button>
                <button class="btn btn-primary" id="btn-save-ma">üíæ Speichern</button>
            </div>
        </div>
    </div>

    <!-- Zeit Eintrag Modal -->
    <div class="modal-overlay hidden" id="modal-zeit">
        <div class="modal" style="width:min(480px,95vw)">
            <div class="modal-header">
                <h2>Zeiteintrag hinzuf√ºgen</h2>
                <button class="modal-close" data-close="modal-zeit">‚úï</button>
            </div>
            <div class="modal-body">
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem">
                    <div class="form-group"><label class="form-label">Mitarbeiter</label><select class="form-control"
                            id="zeit-ma"></select></div>
                    <div class="form-group"><label class="form-label">Projekt</label><select class="form-control"
                            id="zeit-proj"></select></div>
                    <div class="form-group"><label class="form-label">Datum</label><input type="date"
                            class="form-control" id="zeit-datum"></div>
                    <div class="form-group"><label class="form-label">Typ</label><select class="form-control"
                            id="zeit-typ">
                            <option>Arbeit</option>
                            <option>Fahrt</option>
                            <option>Urlaub</option>
                            <option>Krankheit</option>
                            <option>Fortbildung</option>
                        </select></div>
                    <div class="form-group"><label class="form-label">Von</label><input type="time" class="form-control"
                            id="zeit-von" value="07:00"></div>
                    <div class="form-group"><label class="form-label">Bis</label><input type="time" class="form-control"
                            id="zeit-bis" value="15:30"></div>
                    <div class="form-group" style="grid-column:span 2"><label class="form-label">Beschreibung
                            (optional)</label><input class="form-control" id="zeit-beschr"
                            placeholder="Was wurde gemacht?"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-ghost" data-close="modal-zeit">Abbrechen</button>
                <button class="btn btn-primary" id="btn-save-zeit">üíæ Speichern</button>
            </div>
        </div>
    </div>

    <!-- Leistung Modal -->
    <div class="modal-overlay hidden" id="modal-leistung">
        <div class="modal" style="width:min(460px,95vw)">
            <div class="modal-header">
                <h2 id="leistung-modal-title">Neue Leistung</h2>
                <button class="modal-close" data-close="modal-leistung">‚úï</button>
            </div>
            <div class="modal-body">
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem">
                    <div class="form-group"><label class="form-label">Bezeichnung *</label><input class="form-control"
                            id="lst-name" placeholder="Wandanstrich 2-fach"></div>
                    <div class="form-group"><label class="form-label">Kategorie</label><input class="form-control"
                            id="lst-cat" placeholder="Malerei Innen"></div>
                    <div class="form-group"><label class="form-label">Einheit</label><select class="form-control"
                            id="lst-unit">
                            <option>m¬≤</option>
                            <option>Std.</option>
                            <option>St√ºck</option>
                            <option>pauschal</option>
                            <option>m</option>
                            <option>lfdm</option>
                        </select></div>
                    <div class="form-group"><label class="form-label">Preis (‚Ç¨)</label><input type="number"
                            class="form-control" id="lst-price" step="0.01" placeholder="12.50"></div>
                    <div class="form-group" style="grid-column:span 2"><label
                            class="form-label">Beschreibung</label><textarea class="form-control" id="lst-desc" rows="2"
                            placeholder="Kurze Leistungsbeschreibung‚Ä¶"></textarea></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-ghost" data-close="modal-leistung">Abbrechen</button>
                <button class="btn btn-primary" id="btn-save-leistung">üíæ Speichern</button>
            </div>
        </div>
    </div>

    <!-- Katalog-Auswahl Modal -->
    <div class="modal-overlay hidden" id="modal-katalog">
        <div class="modal" style="width:min(560px,95vw)">
            <div class="modal-header">
                <h2>Leistung aus Katalog w√§hlen</h2>
                <button class="modal-close" data-close="modal-katalog">‚úï</button>
            </div>
            <div class="modal-body">
                <input type="text" class="search-input" style="width:100%;margin-bottom:1rem" id="katalog-search"
                    placeholder="Leistung suchen‚Ä¶">
                <div id="katalog-list"></div>
            </div>
        </div>
    </div>

    <!-- Quick Create Modal -->
    <div class="modal-overlay hidden" id="modal-quick">
        <div class="modal quick-modal">
            <div class="modal-header">
                <h2>Was m√∂chten Sie erstellen?</h2><button class="modal-close" data-close="modal-quick">‚úï</button>
            </div>
            <div class="quick-grid">
                <button class="quick-option" id="qq-angebot"><span
                        class="qo-icon">üìã</span><strong>Angebot</strong><span>Neues Angebot erstellen</span></button>
                <button class="quick-option" id="qq-rechnung"><span
                        class="qo-icon">üßæ</span><strong>Rechnung</strong><span>Neue Rechnung stellen</span></button>
                <button class="quick-option" id="qq-projekt"><span
                        class="qo-icon">üèóÔ∏è</span><strong>Projekt</strong><span>Neues Projekt anlegen</span></button>
                <button class="quick-option" id="qq-kunde"><span
                        class="qo-icon">üë•</span><strong>Kunde</strong><span>Kunden erfassen</span></button>
            </div>
        </div>
    </div>

    <!-- Dokument Detail / Vorschau -->
    <div class="modal-overlay hidden" id="modal-dok-detail">
        <div class="modal large-modal">
            <div class="modal-header">
                <h2 id="dok-detail-title">Dokumentdetails</h2>
                <div style="display:flex;gap:.5rem">
                    <button class="btn btn-outline btn-sm" id="dok-detail-edit">‚úèÔ∏è Bearbeiten</button>
                    <button class="btn btn-outline btn-sm" id="dok-detail-print">üñ®Ô∏è Drucken</button>
                    <button class="modal-close" data-close="modal-dok-detail">‚úï</button>
                </div>
            </div>
            <div class="modal-body" id="dok-detail-body"></div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <script src="db.js"></script>
    <script src="app_core.js"></script>
    <script src="app_dokumente.js"></script>
    <script src="app_projekte.js"></script>
    <script src="app_planung.js"></script>
    <script src="app_stammdaten.js"></script>

</body>

</html>